<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalhes do Plano</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root { --primary-color: #D32F2F; --dark-color: #1a1a1a; --bg-color: #f4f4f4; }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; background-color: var(--bg-color); color: #333; padding-bottom: 80px; }
        .back-btn { position: absolute; top: 20px; left: 20px; background: rgba(0,0,0,0.5); color: white; padding: 10px 15px; border-radius: 50px; text-decoration: none; font-weight: bold; z-index: 10; }
        .hero-img { width: 100%; height: 300px; object-fit: cover; background: #ddd; }
        .content { padding: 25px; background: white; border-radius: 20px 20px 0 0; margin-top: -20px; position: relative; min-height: 50vh; }
        h1 { margin: 0 0 10px; color: var(--dark-color); }
        .price { font-size: 2em; color: var(--primary-color); font-weight: bold; }
        .installments { color: #666; font-size: 1.1em; margin-bottom: 20px; }
        .description { line-height: 1.6; color: #555; margin-bottom: 30px; white-space: pre-wrap; }
        .features-box { background: #fff8f8; border: 1px solid #ffcccc; padding: 15px; border-radius: 8px; margin-bottom: 20px; }
        .features-box h4 { margin: 0 0 10px; color: var(--primary-color); }
        .cta-bar { position: fixed; bottom: 0; left: 0; width: 100%; background: white; padding: 15px; box-shadow: 0 -2px 10px rgba(0,0,0,0.1); display: flex; justify-content: center; box-sizing: border-box; }
        .cta-btn { background-color: #25d366; color: white; width: 100%; max-width: 600px; padding: 15px; text-align: center; border-radius: 10px; text-decoration: none; font-weight: bold; font-size: 1.2em; display: flex; align-items: center; justify-content: center; gap: 10px; }
    </style>
</head>
<body>
    <a href="index.html" class="back-btn"><i class="fas fa-arrow-left"></i> Voltar</a>
    <img id="service-img" class="hero-img" src="">
    <div class="content">
        <h1 id="service-name">Carregando...</h1>
        <div class="price" id="service-price">R$ ...</div>
        <div class="installments" id="service-parcela">...</div>
        <div class="features-box"><h4><i class="fas fa-check-circle"></i> Incluso neste pacote:</h4><div id="service-desc" class="description"></div></div>
        <p style="text-align:center; color:#888; font-size:0.9em"><i class="fas fa-shield-alt"></i> Pagamento seguro direto na Auto Escola</p>
    </div>
    <div class="cta-bar"><a href="#" id="whatsapp-btn" class="cta-btn"><i class="fab fa-whatsapp"></i> Simular Financiamento</a></div>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script>
        const firebaseConfig = { apiKey: "AIzaSyAGXoIZh1tPLbpQ62MKw1NkXxboIg5cbMk", authDomain: "auto-escola-premium.firebaseapp.com", projectId: "auto-escola-premium", storageBucket: "auto-escola-premium.firebasestorage.app", messagingSenderId: "100515126742", appId: "1:100515126742:web:88069eb81308bded8e1877" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const WHATSAPP_NUM = "5511947222028"; 
        document.addEventListener('DOMContentLoaded', async () => {
            const id = new URLSearchParams(window.location.search).get('id'); if(!id) return;
            try { const doc = await db.collection("products").doc(id).get(); if(!doc.exists) return; const p = doc.data();
                document.getElementById('service-img').src = p.imageUrl || '';
                document.getElementById('service-name').textContent = p.name;
                document.getElementById('service-price').textContent = p.price.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
                const parc = (p.price / 12).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
                document.getElementById('service-parcela').textContent = `ou entrada + parcelas de ${parc}`;
                document.getElementById('service-desc').textContent = p.description;
                const msg = `Olá! Vi o serviço *${p.name}* no site e gostaria de saber sobre as formas de pagamento e financiamento.`;
                document.getElementById('whatsapp-btn').href = `https://wa.me/${WHATSAPP_NUM}?text=${encodeURIComponent(msg)}`;
            } catch(e) { console.error(e); }
        });
    </script>
</body>
</html>
